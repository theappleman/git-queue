From: Daniel Cordero <theappleman@gmail.com>

t9129: Make test find any UTF-8 locale

Commit 16fc08e2d86dad152194829d21bc55b2ef0c8fb1 introduced a
test that failed if the hardcoded en_US.UTF-8 locale was not
installed.

If no UTF-8 locale is found, skip the tests.
diff --git c/t/t9129-git-svn-i18n-commitencoding.sh w/t/t9129-git-svn-i18n-commitencoding.sh
index 9c7b1ad..a8d7a01 100755
--- c/t/t9129-git-svn-i18n-commitencoding.sh
+++ w/t/t9129-git-svn-i18n-commitencoding.sh
@@ -6,8 +6,10 @@ test_description='git svn honors i18n.commitEncoding in config'
 
 . ./lib-git-svn.sh
 
+utf8_locale=$(locale -a | sed -ne '/[Uu][Tt][Ff]-*8/{p;q}')
+
 compare_git_head_with () {
-	nr=`wc -l < "$1"`
+	nr=$(wc -l < "$1")
 	a=7
 	b=$(($a + $nr - 1))
 	git cat-file commit HEAD | sed -ne "$a,${b}p" >current &&
@@ -17,7 +19,7 @@ compare_git_head_with () {
 compare_svn_head_with () {
 	# extract just the log message and strip out committer info.
 	# don't use --limit here since svn 1.1.x doesn't have it,
-	LC_ALL=en_US.UTF-8 svn log `git svn info --url` | perl -w -e '
+	LC_ALL=$utf8_locale svn log $(git svn info --url) | perl -w -e '
 		use bytes;
 		$/ = ("-"x72) . "\n";
 		my @x = <STDIN>;
@@ -69,7 +71,9 @@ do
 	'
 done
 
-if locale -a |grep -q en_US.utf8; then
+if test "$utf8_locale"; then
+	say "Using locale: $utf8_locale"
+
 	test_expect_success 'ISO-8859-1 should match UTF-8 in svn' '
 	(
 		cd ISO-8859-1 &&
@@ -87,7 +91,7 @@ if locale -a |grep -q en_US.utf8; then
 		'
 	done
 else
-	say "UTF-8 locale not available, test skipped"
+	say "UTF-8 locale not available, tests skipped"
 fi
 
 test_done
